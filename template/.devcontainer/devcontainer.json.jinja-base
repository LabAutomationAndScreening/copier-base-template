{% raw %}{
  "dockerComposeFile": "docker-compose.yml",
  "service": "devcontainer",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  "features": {
    "ghcr.io/devcontainers/features/aws-cli:1.1.2": {
      // https://github.com/devcontainers/features/blob/main/src/aws-cli/devcontainer-feature.json
      // view latest version https://raw.githubusercontent.com/aws/aws-cli/v2/CHANGELOG.rst
      "version": "2.31.11"
    },
    "ghcr.io/devcontainers/features/python:1.7.1": {
      // https://github.com/devcontainers/features/blob/main/src/python/devcontainer-feature.json
      "version": "{% endraw %}{{ python_version }}{% raw %}",
      "installTools": false,
      "optimize": true
    }{% endraw %}{% if is_child_of_copier_base_template is not defined and template_uses_javascript is defined and template_uses_javascript is sameas(true) %}{% raw %},
    "ghcr.io/devcontainers/features/node:1.6.3": {
      // https://github.com/devcontainers/features/tree/main/src/node
      "version": "{% endraw %}{{ node_version }}{% raw %}",
      "pnpmVersion": "{% endraw %}{{ pnpm_version }}{% raw %}"
    }{% endraw %}{% endif %}{% raw %}{% endraw %}{% if install_claude_cli %}{% raw %},
    "ghcr.io/anthropics/devcontainer-features/claude-code:1.0.5": {}{% endraw %}{% endif %}{% raw %}
  },
  "customizations": {
    "vscode": {
      // Add the IDs of extensions you want installed when the container is created.
      "extensions": [
        // basic tooling
        // "eamodio.gitlens@15.5.1",
        "coderabbit.coderabbit-vscode@0.15.2",
        "ms-vscode.live-server@0.5.2025051301",
        "MS-vsliveshare.vsliveshare@1.0.5905",
        "github.copilot@1.388.0",
        "github.copilot-chat@0.33.2025102701",{% endraw %}{% if install_claude_cli %}{% raw %}
        "anthropic.claude-code@2.0.27",{% endraw %}{% endif %}{% raw %}

        // Python
        "ms-python.python@2025.17.2025100201",
        "ms-python.vscode-pylance@2025.8.3",
        "ms-vscode-remote.remote-containers@0.414.0",
        "charliermarsh.ruff@2025.28.0",
{% endraw %}{% if is_child_of_copier_base_template is not defined and template_uses_vuejs is defined and template_uses_vuejs is sameas(true) %}{% raw %}
        // VueJS
        "vue.volar@3.0.6",
        "vitest.explorer@1.16.1",
{% endraw %}{% endif %}{% raw %}{% endraw %}{% if is_child_of_copier_base_template is not defined and template_uses_javascript is defined and template_uses_javascript is sameas(true) %}{% raw %}
        // All javascript
        "dbaeumer.vscode-eslint@3.0.19",
{% endraw %}{% endif %}{% raw %}
        // Misc file formats
        "bierner.markdown-mermaid@1.28.0",
        "samuelcolvin.jinjahtml@0.20.0",
        "tamasfe.even-better-toml@0.19.2",
        "emilast.LogFileHighlighter@3.3.3",
        "esbenp.prettier-vscode@11.0.0"
      ],
      "settings": {
        "editor.accessibilitySupport": "off", // turn off sounds
        "extensions.autoUpdate": false,
        "extensions.autoCheckUpdates": false,
        "livePreview.portNumber": 3025, // arbitrary not to conflict with default 3000 Nuxt port number
        "github.copilot.nextEditSuggestions.allowWhitespaceOnlyChanges": false,
        "[python]": {
          "editor.formatOnSave": true,
          "editor.defaultFormatter": "charliermarsh.ruff"
        },
        "ruff.nativeServer": "on",
        // TODO: see if there's a way to specify different configurations for different folders
        "ruff.configuration": "/workspaces/{% endraw %}{{ repo_name }}{% raw %}/ruff-test.toml", // use the test configuration since it's less restrictive and won't show false positives and underline things
        "[jsonc][json][javascript][typescript][graphql][css][scss][html][vue]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode",
          "editor.formatOnSave": true
        }
      }
    }
  },
  "initializeCommand": "sh .devcontainer/initialize-command.sh",
  "onCreateCommand": "sh .devcontainer/on-create-command.sh",
  "postStartCommand": "sh .devcontainer/post-start-command.sh"
}{% endraw %}
